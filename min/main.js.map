{"version":3,"sources":["../dist/agent.js","../dist/builder.js","../dist/cell.js","../dist/config.js","../dist/deliverator.js","../dist/guard.js","../dist/healbot.js","../dist/hunter_killer.js","../dist/main.js","../dist/mega_miner.js","../dist/mine.js","../dist/path_utils.js","../dist/position_miner.js","../dist/upgrader.js"],"names":["Agent","Config","PathUtils","require","creep","this","prototype","setState","state","memory","moveTo","targetPos","pos","roomName","Game","roomNameToPos","reusePath","resusePath","loop","sources","fullEnergy","giveEnergyToSpawn","nearestEnergyNeed","room","find","FIND_SOURCES","harvestFromSource","source","harvest","ERR_NOT_IN_RANGE","primarySpawn","spawns","Spawn1","spawn","transfer","RESOURCE_ENERGY","renewCreep","RewnewCreeps","carry","energy","carryCapacity","needsEnergy","hasEnergy","log","msg","console","name","module","exports","Builder","Deliverator","bind","fn","me","apply","arguments","extend","child","parent","ctor","constructor","key","hasProp","call","__super__","hasOwnProperty","superClass","sourceFn","rallyFlag","constructionSite","target","pathUtils","nearestEnergyProvider","energyRequester","ramparts","s","structureType","hits","Math","min","MaxWallHP","hitsMax","walls","ref","ref1","ref2","ref3","sites","sortByDistance","FIND_MY_CONSTRUCTION_SITES","length","role","concat","flags","Room2","Room3","FIND_MY_STRUCTURES","filter","FIND_STRUCTURES","controller","owner","username","Cell","MegaMiner","targetCounts","nameForRole","base","base1","totalCreepCounts","spawnEnergyCapacity","j","len","results","push","energyCapacity","sum","spawnEnergy","partsForRole","makeRole","move","work","tough","attack","heal","bodyParts","MOVE","startsWith","indexOf","WORK","CARRY","partsMap","count","i","part","parts","memoryForRole","partsCost","map","TOUGH","ATTACK","RANGED_ATTACK","HEAL","spawnFrom","ret","createCreep","ERR_NOT_ENOUGH_RESOURCES","spawnFailed","err","JSON","stringify","_","creepCount","name1","numCreeps","targetCount","cpu","bucket","spawning","creeps","ticksToLive","notify","ThrowExceptions","CreepRenewEnergy","NoUpgrades","NoRepairs","NoBuilders","shortName","id","split","slice","targetFn","fill","harvestFunc","moveErr","getObjectById","sourceId","say","isNearTo","STRUCTURE_SPAWN","STRUCTURE_EXTENSION","_this","transferEnergy","Source","lastErr","ERR_NO_PATH","failCount","deliver","deliverFunc","deliverId","STRUCTURE_CONTROLLER","upgradeController","ConstructionSite","build","STRUCTURE_WALL","STRUCTURE_ROAD","STRUCTURE_RAMPART","repair","parseInt","e","loopAction","_error","stack","Guard","chooseTarget","targets","FIND_HOSTILE_CREEPS","rally","Flag1","getRangeTo","inRangeTo","Healbot","FIND_MY_CREEPS","c","rangedHeal","HunterKiller","FIND_HOSTILE_SPAWNS","main","startCpu","getUsed","Mine","PositionMiner","a","cell","cellCpu","cpuByRole","cpuUsed","creepByJob","creepEnergy","endCpu","harvestOnly","initCpu","loadCpu","nearestTarget","primaryRoom","primaryStorage","primaryTower","room1Pos","room2","room2Pos","room3","room3Pos","upgraders","STRUCTURE_STORAGE","Room1","small_transporter","source1","source2","transporter","position_miner1","position_miner1_transport","position_miner2","position_miner2_transport","position_miner3","position_miner4","position_miner3_transport","position_miner4_transport","far_builder","position_miner5","position_miner5_transport","position_miner6","position_miner6_transport","tower_filler","builder","upgrader","upgrader_filler","guard","hunter_killer","healbot","hunter_killer_2","healbot_2","Array","reduce","b","String","paddingLeft","paddingValue","time","u","random","ClearTargets","sourceTarget","deliverTarget","Mine_1_1","Mine_1_2","Mine_2_2","Mine_2_1","Mine_3_1","Mine_3_2","HuntersMark","HuntersMark2","BuildHere","trunc","store","targetSource","nil","energyProvider","spawnSpace","workParts","floor","findClosestByRange","FIND_DROPPED_ENERGY","pickup","capacity","res","thing","things","wallCount","x","y","ys","lookForAtArea","allInRoom","distanceComparator","pos_S","t","sort","distance","distances","miningPos","Upgrader","roomController"],"mappings":"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","file":"main.js","sourcesContent":["var Agent, Config, PathUtils;\n\nPathUtils = require('path_utils');\n\nConfig = require('config');\n\nAgent = (function() {\n  function Agent(creep) {\n    this.creep = creep;\n  }\n\n  Agent.prototype.setState = function(state) {\n    return this.creep.memory.state = state;\n  };\n\n  Agent.prototype.moveTo = function(targetPos) {\n    if (targetPos.pos != null) {\n      targetPos = targetPos.pos;\n    }\n    if (targetPos.roomName !== this.creep.pos.roomName) {\n      return this.creep.moveTo(Game.roomNameToPos[targetPos.roomName], {\n        reusePath: 20\n      });\n    } else {\n      return this.creep.moveTo(targetPos, {\n        resusePath: 20\n      });\n    }\n  };\n\n  Agent.prototype.loop = function() {\n    var sources;\n    if (!this.fullEnergy()) {\n      sources = this.creep.room.find(FIND_SOURCES);\n      return this.harvestFromSource(sources[0]);\n    } else {\n      return this.giveEnergyToSpawn(this.nearestEnergyNeed());\n    }\n  };\n\n  Agent.prototype.harvestFromSource = function(source) {\n    if (this.creep.harvest(source) === ERR_NOT_IN_RANGE) {\n      return this.creep.moveTo(source);\n    }\n  };\n\n  Agent.prototype.primarySpawn = function() {\n    return Game.spawns.Spawn1;\n  };\n\n  Agent.prototype.giveEnergyToSpawn = function(spawn) {\n    if (this.creep.transfer(spawn, RESOURCE_ENERGY) === ERR_NOT_IN_RANGE) {\n      return this.creep.moveTo(spawn);\n    } else {\n      if ((spawn.renewCreep != null) && Config.RewnewCreeps) {\n        return spawn.renewCreep(this.creep);\n      }\n    }\n  };\n\n  Agent.prototype.fullEnergy = function() {\n    return this.creep.carry.energy >= this.creep.carryCapacity;\n  };\n\n  Agent.prototype.needsEnergy = function() {\n    return false;\n  };\n\n  Agent.prototype.hasEnergy = function() {\n    return false;\n  };\n\n  Agent.prototype.log = function(msg) {\n    return console.log(\"[\" + this.creep.name + \"] \" + msg);\n  };\n\n  return Agent;\n\n})();\n\nmodule.exports = Agent;\n\n//# sourceMappingURL=agent.js.map\n","var Builder, Config, Deliverator, PathUtils,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nPathUtils = require('path_utils');\n\nDeliverator = require('deliverator');\n\nConfig = require('config');\n\nBuilder = (function(superClass) {\n  extend(Builder, superClass);\n\n  function Builder(creep, sourceFn, rallyFlag) {\n    if (sourceFn == null) {\n      sourceFn = null;\n    }\n    if (rallyFlag == null) {\n      rallyFlag = null;\n    }\n    this.constructionSite = bind(this.constructionSite, this);\n    if (rallyFlag != null) {\n      this.target = rallyFlag;\n    } else {\n      this.target = creep;\n    }\n    if (sourceFn == null) {\n      this.pathUtils || (this.pathUtils = new PathUtils(this.target));\n      sourceFn = this.pathUtils.nearestEnergyProvider;\n    }\n    Builder.__super__.constructor.call(this, creep, sourceFn, this.constructionSite);\n    creep.memory.energyRequester = true;\n  }\n\n  Builder.prototype.ramparts = function(s) {\n    return (s.structureType === 'rampart') && (s.hits < Math.min(Config.MaxWallHP, s.hitsMax));\n  };\n\n  Builder.prototype.walls = function(s) {\n    return s.structureType === 'constructedWall' && s.hits < Math.min(s.hitsMax, Config.MaxWallHP || 3000000);\n  };\n\n  Builder.prototype.constructionSite = function() {\n    var ref, ref1, ref2, ref3, sites;\n    this.pathUtils || (this.pathUtils = new PathUtils(this.target));\n    sites = this.pathUtils.sortByDistance(this.creep.room.find(FIND_MY_CONSTRUCTION_SITES));\n    if (sites.length === 0 && this.creep.memory.role === 'far_builder') {\n      sites = [];\n      sites = sites.concat((ref = Game.flags.Room2) != null ? (ref1 = ref.room) != null ? ref1.find(FIND_MY_CONSTRUCTION_SITES) : void 0 : void 0);\n      sites = sites.concat((ref2 = Game.flags.Room3) != null ? (ref3 = ref2.room) != null ? ref3.find(FIND_MY_CONSTRUCTION_SITES) : void 0 : void 0);\n      sites = this.pathUtils.sortByDistance(sites);\n    }\n    if (sites.length === 0) {\n      sites = this.pathUtils.sortByDistance(this.creep.room.find(FIND_MY_STRUCTURES).filter(this.ramparts));\n    }\n    if (sites.length === 0) {\n      sites = this.pathUtils.sortByDistance(this.creep.room.find(FIND_STRUCTURES).filter(this.walls));\n    }\n    if (sites.length === 0) {\n      if (this.creep.room.controller.owner.username === \"omgbear\") {\n        sites = [this.creep.room.controller];\n      }\n    }\n    return sites[0];\n  };\n\n  return Builder;\n\n})(Deliverator);\n\nmodule.exports = Builder;\n\n//# sourceMappingURL=builder.js.map\n","var Cell, MegaMiner;\n\nMegaMiner = require('mega_miner');\n\nCell = (function() {\n  function Cell(room, targetCounts) {\n    this.room = room;\n    this.targetCounts = targetCounts;\n  }\n\n  Cell.prototype.nameForRole = function(role) {\n    var base, base1;\n    (base = this.room.memory).totalCreepCounts || (base.totalCreepCounts = {});\n    (base1 = this.room.memory.totalCreepCounts)[role] || (base1[role] = 0);\n    this.room.memory.totalCreepCounts[role]++;\n    return role + \"_\" + this.room.memory.totalCreepCounts[role];\n  };\n\n  Cell.prototype.spawnEnergyCapacity = function() {\n    var s;\n    return ((function() {\n      var j, len, ref, results;\n      ref = this.room.find(FIND_MY_STRUCTURES);\n      results = [];\n      for (j = 0, len = ref.length; j < len; j++) {\n        s = ref[j];\n        if (s.structureType === 'extension' || s.structureType === \"spawn\") {\n          results.push(s.energyCapacity);\n        }\n      }\n      return results;\n    }).call(this)).sum();\n  };\n\n  Cell.prototype.spawnEnergy = function() {\n    var s;\n    return ((function() {\n      var j, len, ref, results;\n      ref = this.room.find(FIND_MY_STRUCTURES);\n      results = [];\n      for (j = 0, len = ref.length; j < len; j++) {\n        s = ref[j];\n        if (s.structureType === 'extension' || s.structureType === \"spawn\") {\n          results.push(s.energy);\n        }\n      }\n      return results;\n    }).call(this)).sum();\n  };\n\n  Cell.prototype.partsForRole = function(role) {\n    switch (role) {\n      case \"small_transporter\":\n        return this.makeRole({\n          carry: 2,\n          move: 1\n        });\n      case \"source1\":\n      case \"source2\":\n        return this.makeRole({\n          work: 1,\n          carry: 1,\n          move: 1\n        });\n      case \"upgrader\":\n        return this.makeRole({\n          work: 8,\n          carry: 2,\n          move: 5\n        });\n      case \"transporter\":\n        return this.makeRole({\n          carry: 6,\n          move: 3\n        });\n      case \"room2_transporter\":\n        return this.makeRole({\n          carry: 9,\n          move: 3\n        });\n      case \"guard\":\n        return this.makeRole({\n          tough: 3,\n          move: 2,\n          attack: 3\n        });\n      case \"hunter_killer\":\n      case \"hunter_killer_2\":\n        return this.makeRole({\n          tough: 10,\n          move: 3,\n          attack: 4\n        });\n      case \"healbot\":\n      case \"healbot_2\":\n        return this.makeRole({\n          tough: 10,\n          heal: 1,\n          move: 3\n        });\n      case \"builder\":\n      case \"repair\":\n        return this.makeRole({\n          work: 6,\n          carry: 4,\n          move: 5\n        });\n      case \"far_builder\":\n        return this.makeRole({\n          work: 4,\n          carry: 6,\n          move: 5\n        });\n      case \"mega_miner\":\n      case \"mega_miner2\":\n        return MegaMiner.bodyParts(this);\n      case \"room2_mega_miner\":\n      case \"room2_mega_miner2\":\n        return MegaMiner.bodyParts(this).concat([MOVE]);\n      case 'upgrader_filler':\n        return this.makeRole({\n          carry: 6,\n          move: 3\n        });\n      default:\n        if (role.startsWith(\"position_miner\")) {\n          if (role.indexOf(\"transport\") === -1) {\n            return MegaMiner.bodyParts(this).concat([MOVE]);\n          } else {\n            return this.makeRole({\n              carry: 12,\n              move: 10\n            });\n          }\n        } else {\n          return [WORK, CARRY, MOVE];\n        }\n    }\n  };\n\n  Cell.prototype.makeRole = function(partsMap) {\n    var count, i, j, part, parts, ref;\n    parts = [];\n    for (part in partsMap) {\n      count = partsMap[part];\n      for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n        parts.push(part);\n      }\n    }\n    return parts;\n  };\n\n  Cell.prototype.memoryForRole = function(role) {\n    return {\n      \"role\": role\n    };\n  };\n\n  Cell.prototype.partsCost = function(parts) {\n    return parts.map(function(s) {\n      switch (s) {\n        case TOUGH:\n          return 10;\n        case MOVE:\n        case CARRY:\n          return 50;\n        case ATTACK:\n          return 80;\n        case WORK:\n          return 100;\n        case RANGED_ATTACK:\n          return 150;\n        case HEAL:\n          return 250;\n      }\n    }).sum();\n  };\n\n  Cell.prototype.spawn = function(spawnFrom, role) {\n    var memory, name, parts, partsCost, ret;\n    name = this.nameForRole(role);\n    parts = this.partsForRole(role);\n    memory = this.memoryForRole(role);\n    partsCost = this.partsCost(parts);\n    if (partsCost > this.spawnEnergyCapacity()) {\n      console.log(\"Can't spawn \" + role + \" due to max capacity -- have \" + (this.spawnEnergyCapacity()) + \"/\" + partsCost);\n      return false;\n    }\n    ret = spawnFrom.createCreep(parts, name, memory);\n    if (ret === ERR_NOT_ENOUGH_RESOURCES) {\n      console.log(\"Can't spawn \" + role + \" due to resources -- have \" + (this.spawnEnergy()) + \"/\" + partsCost);\n      this.spawnFailed = true;\n      return true;\n    } else if (ret < 0) {\n      console.log(\"Can't spawn \" + role + \" due to other error: \" + err + \" -- have \" + (this.spawnEnergy()) + \"/\" + partsCost);\n      return false;\n    } else {\n      console.log(\"Spawning \" + role + \" named \" + name + \" from \" + spawnFrom.name + \" with \" + parts + \" and \" + (JSON.stringify(memory)) + \", got \" + ret);\n    }\n    return true;\n  };\n\n  Cell.prototype.loop = function() {\n    var _, creep, creepCount, name1, numCreeps, ref, ref1, results, role, spawn, targetCount;\n    spawn = Game.spawns.Spawn1;\n    if (Game.cpu.bucket < 1500) {\n      return;\n    }\n    if (spawn.spawning) {\n      return;\n    }\n    creepCount = {};\n    numCreeps = 0;\n    ref = Game.creeps;\n    for (_ in ref) {\n      creep = ref[_];\n      if (creep.ticksToLive < 150) {\n        continue;\n      }\n      creepCount[name1 = creep.memory.role] || (creepCount[name1] = 0);\n      creepCount[creep.memory.role]++;\n      numCreeps++;\n    }\n    if (numCreeps < 5) {\n      Game.notify(\"EMERGENCY: CreepCount low: \" + (JSON.stringify(creepCount)));\n      this.targetCounts['small_transporter'] = 1;\n      this.targetCounts['source1'] = 2;\n      this.targetCounts['source2'] = 2;\n    }\n    console.log(\"\\n\");\n    console.log(JSON.stringify(creepCount));\n    if (!spawn.spawning) {\n      ref1 = this.targetCounts;\n      results = [];\n      for (role in ref1) {\n        targetCount = ref1[role];\n        if ((creepCount[role] || 0) < targetCount) {\n          if (this.spawn(spawn, role)) {\n            break;\n          } else {\n            results.push(void 0);\n          }\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    }\n  };\n\n  return Cell;\n\n})();\n\nmodule.exports = Cell;\n\n//# sourceMappingURL=cell.js.map\n","module.exports = {\n  ThrowExceptions: true,\n  CreepRenewEnergy: 100,\n  NoUpgrades: false,\n  NoRepairs: false,\n  NoBuilders: false,\n  MaxWallHP: 40000\n};\n\n//# sourceMappingURL=config.js.map\n","var Agent, Config, Deliverator, shortName,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nAgent = require('agent');\n\nConfig = require('config');\n\nshortName = function(target) {\n  var parts;\n  parts = (target.name || target.structureType || target.id || \"\").split(\"_\");\n  if (parts.length === 2) {\n    return parts[0][0] + \"_\" + parts[1];\n  }\n  return parts.map(function(s) {\n    return s.slice(0, 4);\n  });\n};\n\nDeliverator = (function(superClass) {\n  extend(Deliverator, superClass);\n\n  function Deliverator(creep, sourceFn, targetFn) {\n    var base;\n    this.sourceFn = sourceFn;\n    this.targetFn = targetFn;\n    Deliverator.__super__.constructor.call(this, creep);\n    (base = this.creep.memory).state || (base.state = 'fill');\n  }\n\n  Deliverator.prototype.fill = function() {\n    var err, harvestFunc, moveErr, target;\n    target = Game.getObjectById(this.creep.memory.sourceId);\n    if (target == null) {\n      target = this.sourceFn();\n      if (target != null) {\n        this.creep.say(\"-> \" + (target.name || target.structureType || target.id));\n      }\n      if (target != null) {\n        this.log(\"fill from \" + (target.name || target.structureType || target.id || target.constructor));\n      }\n    }\n    if (target == null) {\n      return false;\n    }\n    this.creep.memory.sourceId = target.id;\n    if (!this.creep.pos.isNearTo(target)) {\n      this.moveTo(target);\n      return;\n    }\n    harvestFunc = (function() {\n      switch (false) {\n        case !(target.structureType === STRUCTURE_SPAWN || target.structureType === STRUCTURE_EXTENSION):\n          return (function(_this) {\n            return function() {\n              return target.transferEnergy(_this.creep);\n            };\n          })(this);\n        case target.transfer == null:\n          return (function(_this) {\n            return function() {\n              return target.transfer(_this.creep, RESOURCE_ENERGY);\n            };\n          })(this);\n        case target.constructor !== Source:\n          return (function(_this) {\n            return function() {\n              return _this.creep.harvest(target);\n            };\n          })(this);\n      }\n    }).call(this);\n    moveErr = -1;\n    if ((err = this.creep.memory.lastErr = harvestFunc()) === ERR_NOT_IN_RANGE) {\n      if ((moveErr = this.moveTo(target, {\n        resusePath: 60\n      })) === ERR_NO_PATH) {\n        this.creep.memory.failCount++;\n      }\n    }\n    if (err < 0 && err !== ERR_NOT_IN_RANGE && err !== ERR_NOT_ENOUGH_RESOURCES) {\n      this.creep.memory.failCount++;\n    }\n    if (this.creep.memory.failCount > 10) {\n      delete this.creep.memory.sourceId;\n      this.creep.memory.failCount = 0;\n      this.log('fill fail');\n    }\n    if (!this.creep.memory.sourceId && this.creep.carry.energy > 20) {\n      this.creep.memory.state = 'deliver';\n    }\n    return true;\n  };\n\n  Deliverator.prototype.deliver = function() {\n    var deliverFunc, err, moveErr, target;\n    target = Game.getObjectById(this.creep.memory.deliverId);\n    if (!target) {\n      target || (target = this.targetFn());\n      if (target != null) {\n        this.creep.say(\"<- \" + (shortName(target)));\n      }\n      if (target != null) {\n        this.log(\"deliver to \" + (target.name || target.structureType || target.constructor) + \" \" + this.creep.memory.failCount);\n      }\n    }\n    if (target == null) {\n      return false;\n    }\n    this.creep.memory.deliverId = target.id;\n    if (!this.creep.pos.isNearTo(target)) {\n      this.moveTo(target, {\n        resusePath: 60\n      });\n      return;\n    }\n    deliverFunc = (function() {\n      switch (false) {\n        case target.structureType !== STRUCTURE_CONTROLLER:\n          return (function(_this) {\n            return function() {\n              return _this.creep.upgradeController(target);\n            };\n          })(this);\n        case target.constructor !== ConstructionSite:\n          return (function(_this) {\n            return function() {\n              return _this.creep.build(target);\n            };\n          })(this);\n        case !(target.structureType === STRUCTURE_WALL || target.structureType === STRUCTURE_ROAD || target.structureType === STRUCTURE_RAMPART):\n          return (function(_this) {\n            return function() {\n              return _this.creep.repair(target);\n            };\n          })(this);\n        default:\n          return (function(_this) {\n            return function() {\n              return _this.creep.transfer(target, RESOURCE_ENERGY);\n            };\n          })(this);\n      }\n    }).call(this);\n    moveErr = -1;\n    if ((err = this.creep.memory.lastErr = deliverFunc()) === ERR_NOT_IN_RANGE) {\n      if ((moveErr = this.moveTo(target, {\n        resusePath: 50\n      })) === ERR_NO_PATH) {\n        this.creep.memory.failCount++;\n      }\n    } else if (target.renewCreep != null) {\n      if (this.creep.ticksToLive < parseInt(Config.CreepRenewEnergy)) {\n        target.renewCreep(this.creep);\n      }\n    }\n    if (moveErr === 0) {\n      return;\n    }\n    if (err === -8) {\n      delete this.creep.memory.deliverId;\n    }\n    if (err < 0 && err !== ERR_NOT_IN_RANGE) {\n      this.log(err);\n      this.creep.memory.failCount++;\n    }\n    if (this.creep.memory.failCount > 10) {\n      this.log('deliver fail');\n      delete this.creep.memory.deliverId;\n      this.creep.memory.failCount = 0;\n    }\n    if (this.creep.memory.role === 'repair' && target.hits >= Math.min(target.hitsMax, Config.MaxWallHP)) {\n      delete this.creep.memory.deliverId;\n      this.creep.memory.failCount = 0;\n    }\n    return true;\n  };\n\n  Deliverator.prototype.loop = function() {\n    var e;\n    try {\n      return this.loopAction();\n    } catch (_error) {\n      e = _error;\n      return this.log(e.stack);\n    }\n  };\n\n  Deliverator.prototype.loopAction = function() {\n    var ret;\n    switch (this.creep.memory.state) {\n      case 'fill':\n        ret = this.fill();\n        break;\n      case 'deliver':\n        ret = this.deliver();\n        break;\n      case 'renew':\n        this.setState('deliver');\n        return;\n        if (Game.spawns.Spawn1.renewCreep(this.creep) === ERR_NOT_IN_RANGE) {\n          this.creep.moveTo(Game.spawns.Spawn1);\n        }\n        if (this.creep.ticksToLive > Math.min(Config.CreepRenewEnergy * 2, 1400) || Game.spawns.Spawn1.energy === 0) {\n          this.setState('');\n        }\n    }\n    switch (false) {\n      case !this.fullEnergy():\n        delete this.creep.memory.sourceId;\n        this.setState('deliver');\n        this.creep.memory.failCount = 0;\n        break;\n      case this.creep.carry.energy !== 0:\n        this.setState('fill');\n        this.creep.memory.failCount = 0;\n        delete this.creep.memory.deliverId;\n    }\n    return ret;\n  };\n\n  return Deliverator;\n\n})(Agent);\n\nmodule.exports = Deliverator;\n\n//# sourceMappingURL=deliverator.js.map\n","var Agent, Guard, PathUtils,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nAgent = require('agent');\n\nPathUtils = require('path_utils');\n\nGuard = (function(superClass) {\n  extend(Guard, superClass);\n\n  function Guard() {\n    return Guard.__super__.constructor.apply(this, arguments);\n  }\n\n  Guard.prototype.chooseTarget = function() {\n    var targets;\n    targets = new PathUtils(this.creep).sortByDistance(this.creep.room.find(FIND_HOSTILE_CREEPS));\n    return targets[0];\n  };\n\n  Guard.prototype.loop = function() {\n    var err, rally, target;\n    target = this.chooseTarget();\n    rally = Game.flags.Flag1;\n    if ((target != null) && rally.pos.getRangeTo(target) > 5) {\n      target = null;\n    }\n    if ((target == null) && !this.creep.pos.inRangeTo(rally, 2)) {\n      this.creep.moveTo(rally);\n      return;\n    }\n    if ((err = this.creep.attack(target)) === ERR_NOT_IN_RANGE) {\n      return this.creep.moveTo(target);\n    }\n  };\n\n  return Guard;\n\n})(Agent);\n\nmodule.exports = Guard;\n\n//# sourceMappingURL=guard.js.map\n","var Agent, Healbot, PathUtils,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nAgent = require('agent');\n\nPathUtils = require('path_utils');\n\nHealbot = (function(superClass) {\n  extend(Healbot, superClass);\n\n  function Healbot() {\n    return Healbot.__super__.constructor.apply(this, arguments);\n  }\n\n  Healbot.prototype.chooseTarget = function() {\n    var targets;\n    targets = new PathUtils(this.creep).sortByDistance(this.creep.room.find(FIND_MY_CREEPS).filter(function(c) {\n      return c.hits < c.hitsMax;\n    }));\n    return targets[0];\n  };\n\n  Healbot.prototype.loop = function(rally) {\n    var target;\n    target = this.chooseTarget();\n    rally || (rally = Game.flags.Flag1);\n    if ((target == null) && !this.creep.pos.inRangeTo(rally, 3)) {\n      this.creep.moveTo(rally);\n      return;\n    }\n    if (this.target) {\n      this.moveTo(this.target);\n      if (this.creep.pos.isNearTo(target)) {\n        return this.creep.heal(target);\n      } else {\n        return this.creep.rangedHeal(target);\n      }\n    }\n  };\n\n  return Healbot;\n\n})(Agent);\n\nmodule.exports = Healbot;\n\n//# sourceMappingURL=healbot.js.map\n","var Agent, HunterKiller, PathUtils,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nAgent = require('agent');\n\nPathUtils = require('path_utils');\n\nHunterKiller = (function(superClass) {\n  extend(HunterKiller, superClass);\n\n  function HunterKiller() {\n    return HunterKiller.__super__.constructor.apply(this, arguments);\n  }\n\n  HunterKiller.prototype.chooseTarget = function() {\n    var target, targets;\n    targets = new PathUtils(this.creep).sortByDistance(this.creep.room.find(FIND_HOSTILE_CREEPS).concat(this.creep.room.find(FIND_HOSTILE_SPAWNS)));\n    if (targets.length === 0 && this.creep.memory.role === 'hunter_killer_2') {\n      targets = new PathUtils(this.creep).sortByDistance(this.creep.room.find(FIND_STRUCTURES).filter(function(s) {\n        return s.structureType === STRUCTURE_WALL;\n      }));\n    }\n    target = targets[0];\n    if (target == null) {\n      return;\n    }\n    console.log(this.creep.name + \" closing in on \" + (target.name || target.structureType) + \": \" + (this.creep.pos.getRangeTo(target)) + \" units\");\n    return target;\n  };\n\n  HunterKiller.prototype.loop = function(rally, target) {\n    var err;\n    rally || (rally = Game.flags.Flag1);\n    target || (target = this.chooseTarget());\n    if ((target != null) && rally.pos.getRangeTo(target) > 5) {\n      target = null;\n    }\n    if ((target == null) && !this.creep.pos.inRangeTo(rally, 3)) {\n      this.creep.moveTo(rally);\n      return;\n    }\n    if ((err = this.creep.attack(target)) === ERR_NOT_IN_RANGE) {\n      return this.creep.moveTo(target);\n    }\n  };\n\n  return HunterKiller;\n\n})(Agent);\n\nmodule.exports = HunterKiller;\n\n//# sourceMappingURL=hunter_killer.js.map\n","var main, startCpu;\n\nif (Game.cpu.bucket < 1500) {\n  Game.notify(\"CPU LOW!\", 20);\n  main = false;\n}\n\nstartCpu = Game.cpu.getUsed();\n\nif (main == null) {\n  main = function() {\n    var Agent, Builder, Cell, Config, Deliverator, Guard, Healbot, HunterKiller, Mine, PathUtils, PositionMiner, _, a, cell, cellCpu, cpu, cpuByRole, cpuUsed, creep, creepByJob, creepEnergy, e, endCpu, harvestOnly, initCpu, loadCpu, name, name1, nearestEnergyNeed, nearestTarget, primaryRoom, primarySpawn, primaryStorage, primaryTower, ref, ref1, role, room1Pos, room2, room2Pos, room3, room3Pos, roomNameToPos, targetCounts, upgraders;\n    primarySpawn = Game.spawns.Spawn1;\n    primaryRoom = primarySpawn.room;\n    primaryStorage = primaryRoom.find(FIND_MY_STRUCTURES).filter(function(s) {\n      return s.structureType === STRUCTURE_STORAGE;\n    })[0];\n    room1Pos = Game.flags.Room1.pos;\n    room2 = Game.flags.Room2.room;\n    room2Pos = Game.flags.Room2.pos;\n    room3 = Game.flags.Room3.room;\n    room3Pos = Game.flags.Room3.pos;\n    roomNameToPos = {};\n    roomNameToPos[room1Pos.roomName] = room1Pos;\n    roomNameToPos[room2Pos.roomName] = room2Pos;\n    roomNameToPos[room3Pos.roomName] = room3Pos;\n    Game.roomNameToPos = roomNameToPos;\n    Agent = require('agent');\n    Mine = require('mine');\n    Deliverator = require('deliverator');\n    Cell = require('cell');\n    Builder = require('builder');\n    Guard = require('guard');\n    Config = require('config');\n    PathUtils = require('path_utils');\n    Healbot = require('healbot');\n    HunterKiller = require('hunter_killer');\n    PositionMiner = require('position_miner');\n    targetCounts = {\n      small_transporter: 1,\n      source1: 0,\n      source2: 0,\n      transporter: 0,\n      position_miner1: 1,\n      position_miner1_transport: 1,\n      position_miner2: 1,\n      position_miner2_transport: 1,\n      position_miner3: 0,\n      position_miner4: 0,\n      position_miner3_transport: 0,\n      position_miner4_transport: 0,\n      far_builder: 0,\n      position_miner5: 1,\n      position_miner5_transport: 2,\n      position_miner6: 1,\n      position_miner6_transport: 2,\n      tower_filler: 1,\n      transporter: 1,\n      repair: !Config.NoRepairs ? 1 : void 0,\n      builder: !Config.NoBuilders ? 1 : void 0,\n      upgrader: !Config.NoUpgrades ? 3 : void 0,\n      upgrader_filler: !Config.NoUpgrades ? 0 : void 0,\n      guard: 3,\n      hunter_killer: 2,\n      healbot: 2,\n      hunter_killer_2: 2,\n      healbot_2: 2\n    };\n    Array.prototype.sum = function() {\n      if (!this.length) {\n        return 0;\n      }\n      return this.reduce(function(a, b) {\n        return a + b;\n      });\n    };\n    String.prototype.paddingLeft = function(paddingValue) {\n      return String(paddingValue + this).slice(-paddingValue.length);\n    };\n    primaryTower = primaryRoom.find(FIND_MY_STRUCTURES).filter(function(s) {\n      return s.structureType === 'tower';\n    })[0];\n    loadCpu = Game.cpu.getUsed();\n    console.log(\"Init took \" + (loadCpu - startCpu));\n    try {\n      nearestTarget = new PathUtils(primaryTower).sortByDistance(primaryRoom.find(FIND_HOSTILE_CREEPS))[0];\n      if (nearestTarget != null) {\n        primaryTower.attack(nearestTarget);\n      }\n    } catch (_error) {\n      e = _error;\n      console.log(\"Failed to use tower!!!\");\n      Game.notify(\"Failed to use tower!!!\", 20);\n    }\n    try {\n      if (((function() {\n        var results;\n        results = [];\n        for (a in primaryRoom.find(FIND_HOSTILE_CREEPS)) {\n          results.push(1);\n        }\n        return results;\n      })()).length > 0) {\n        console.log(\"Under Attack\");\n        targetCounts[\"guard\"] = 10;\n        Game.notify(\"Active BattleMode!! \" + (primaryRoom.find(FIND_HOSTILE_CREEPS).length) + \" hostile creeps in base!!\");\n        try {\n          nearestTarget = new PathUtils(primaryTower).sortByDistance(primaryRoom.find(FIND_HOSTILE_CREEPS))[0];\n          if (nearestTarget != null) {\n            primaryTower.attack(nearestTarget);\n          }\n        } catch (_error) {\n          e = _error;\n          console.log(\"Failed to use tower!!!\");\n          Game.notify(\"Failed to use tower!!!\", 20);\n        }\n      }\n      if (primaryTower.energy > primaryTower.energyCapacity / 2) {\n        nearestTarget = new PathUtils(primaryTower).sortByDistance(primaryRoom.find(FIND_MY_STRUCTURES).filter(function(s) {\n          return s.hits < Math.min(s.hitsMax, Config.MaxWallHP);\n        }))[0];\n        if (nearestTarget != null) {\n          primaryTower.repair(nearestTarget);\n        }\n      }\n    } catch (_error) {\n      console.log(\"Caught exception! \" + e);\n      if (Config.ThrowExceptions) {\n        throw e;\n      }\n    }\n    initCpu = Game.cpu.getUsed();\n    console.log(\"Defense took \" + (initCpu - loadCpu));\n    if (Game.cpu.bucket < 1800) {\n      Game.notify(\"CPU LOW!\", 20);\n      return;\n    }\n    try {\n      cell = new Cell(primaryRoom, targetCounts);\n      cell.loop();\n      harvestOnly = cell.spawnFailed;\n    } catch (_error) {\n      e = _error;\n      if (Config.ThrowExceptions) {\n        throw e;\n      }\n      console.log(\"Caught exception! \" + e);\n    }\n    cellCpu = Game.cpu.getUsed();\n    console.log(\"Cell took \" + (cellCpu - initCpu));\n    if (Game.cpu.bucket < 2200 && Game.time % 5 === 0) {\n      return;\n    }\n    upgraders = function() {\n      var u;\n      u = primaryRoom.find(FIND_MY_CREEPS).filter(function(c) {\n        return c.memory.role === 'upgrader';\n      });\n      return u[parseInt(Math.random() * u.length)];\n    };\n    creepByJob = {};\n    ref = Game.creeps;\n    for (name in ref) {\n      creep = ref[name];\n      role = creep.memory['role'];\n      creepByJob[role] || (creepByJob[role] = []);\n      creepByJob[role].push(creep);\n    }\n    creepEnergy = 0;\n    cpuByRole = {};\n    ref1 = Game.creeps;\n    for (_ in ref1) {\n      creep = ref1[_];\n      if (Game.cpu.bucket < 500) {\n        continue;\n      }\n      if (Game.flags.ClearTargets != null) {\n        delete creep.memory.sourceTarget;\n        delete creep.memory.deliverTarget;\n      }\n      cpuUsed = Game.cpu.getUsed();\n      try {\n        switch (creep.memory.role) {\n          case 'position_miner1':\n            new PositionMiner(creep, Game.flags.Mine_1_1.pos).loop();\n            break;\n          case 'position_miner2':\n            new PositionMiner(creep, Game.flags.Mine_1_2.pos).loop();\n            break;\n          case 'position_miner3':\n            new PositionMiner(creep, Game.flags.Mine_2_2.pos).loop();\n            break;\n          case 'position_miner4':\n            new PositionMiner(creep, Game.flags.Mine_2_1.pos).loop();\n            break;\n          case 'position_miner5':\n            new PositionMiner(creep, Game.flags.Mine_3_1.pos).loop();\n            break;\n          case 'position_miner6':\n            new PositionMiner(creep, Game.flags.Mine_3_2.pos).loop();\n            break;\n          case 'position_miner1_transport':\n            new Deliverator(creep, (function() {\n              var ref2;\n              return (ref2 = creepByJob['position_miner1']) != null ? ref2[0] : void 0;\n            }), function() {\n              return primaryStorage;\n            }).loop();\n            break;\n          case 'position_miner2_transport':\n            new Deliverator(creep, (function() {\n              var ref2;\n              return (ref2 = creepByJob['position_miner2']) != null ? ref2[0] : void 0;\n            }), function() {\n              return primaryStorage;\n            }).loop();\n            break;\n          case 'position_miner3_transport':\n            new Deliverator(creep, (function() {\n              var ref2;\n              return (ref2 = creepByJob['position_miner3']) != null ? ref2[0] : void 0;\n            }), function() {\n              return primaryStorage;\n            }).loop();\n            break;\n          case 'position_miner4_transport':\n            new Deliverator(creep, (function() {\n              var ref2;\n              return (ref2 = creepByJob['position_miner4']) != null ? ref2[0] : void 0;\n            }), function() {\n              return primaryStorage;\n            }).loop();\n            break;\n          case 'position_miner5_transport':\n            new Deliverator(creep, (function() {\n              var ref2;\n              return (ref2 = creepByJob['position_miner5']) != null ? ref2[0] : void 0;\n            }), function() {\n              return primaryStorage;\n            }).loop();\n            break;\n          case 'position_miner6_transport':\n            new Deliverator(creep, (function() {\n              var ref2;\n              return (ref2 = creepByJob['position_miner6']) != null ? ref2[0] : void 0;\n            }), function() {\n              return primaryStorage;\n            }).loop();\n            break;\n          case 'healbot':\n            new Healbot(creep).loop(Game.flags.HuntersMark);\n            break;\n          case 'hunter_killer':\n            new HunterKiller(creep).loop(Game.flags.HuntersMark);\n            break;\n          case 'healbot_2':\n            new Healbot(creep).loop(Game.flags.HuntersMark2);\n            break;\n          case 'hunter_killer_2':\n            new HunterKiller(creep).loop(Game.flags.HuntersMark2);\n            break;\n          case 'guard':\n            new Guard(creep).loop();\n            break;\n          case 'tower_filler':\n            if (primaryTower.energy < primaryTower.energyCapacity) {\n              new Deliverator(creep, (function() {\n                return primaryStorage;\n              }), (function() {\n                return primaryTower;\n              })).loop();\n            } else {\n              continue;\n            }\n            break;\n          case !Config.NoUpgrades && 'upgrader_filler':\n            new Deliverator(creep, (function() {\n              return primaryStorage;\n            }), upgraders).loop();\n            break;\n          case 'upgrader':\n            if (!Config.NoUpgrades) {\n              new Deliverator(creep, (function() {\n                return primaryStorage;\n              }), (function() {\n                return creep.room.controller;\n              })).loop();\n            }\n            break;\n          case !Config.NoBuilders && 'builder':\n            new Builder(creep, (function() {\n              return primaryStorage;\n            })).loop();\n            break;\n          case !Config.NoBuilders && 'far_builder':\n            new Builder(creep, null, Game.flags.BuildHere).loop();\n            break;\n          case 'source1':\n            new Deliverator(creep, (function() {\n              return primaryRoom.find(FIND_SOURCES)[0];\n            }), (function() {\n              return (new PathUtils(creep)).nearestEnergyNeed();\n            })).loop();\n            break;\n          case 'source2':\n            new Deliverator(creep, (function() {\n              return primaryRoom.find(FIND_SOURCES)[1];\n            }), (function() {\n              return (new PathUtils(creep)).nearestEnergyNeed();\n            })).loop();\n            break;\n          case 'transporter':\n          case \"small_transporter\":\n            nearestEnergyNeed = function() {\n              var targets;\n              if (creep.pos.roomName !== primarySpawn.pos.roomName) {\n                return new PathUtils(primarySpawn).nearestEnergyNeed();\n              } else {\n                targets = new PathUtils(creep).sortByDistance(creep.room.find(FIND_MY_STRUCTURES).filter(function(c) {\n                  return (c.structureType === 'extension' || c.structureType === 'spawn') && c.energy < c.energyCapacity;\n                }));\n                return targets[parseInt(Math.random() * Math.min(targets.length, 2))];\n              }\n            };\n            new Deliverator(creep, (function() {\n              return primaryStorage;\n            }), nearestEnergyNeed).loop();\n            break;\n          case 'repair':\n            if (!Config.NoRepairs) {\n              new Deliverator(creep, (function() {\n                return primaryStorage;\n              }), (function() {\n                return (new PathUtils(creep)).sortByDistance(primaryRoom.find(FIND_STRUCTURES).filter(function(s) {\n                  return s.structureType !== 'rampart' && s.hits < Math.min(s.hitsMax, Config.MaxWallHP);\n                }))[0];\n              })).loop();\n            }\n            break;\n          default:\n            console.log(\"Orphan bot \" + creep.name);\n        }\n      } catch (_error) {\n        e = _error;\n        if (Config.ThrowExceptions) {\n          throw e;\n        }\n        console.log(\"Caught exception! \" + e);\n      } finally {\n        creepEnergy += creep.carry.energy;\n        cpuByRole[name1 = creep.memory.role] || (cpuByRole[name1] = 0);\n        cpuByRole[creep.memory.role] += Game.cpu.getUsed() - cpuUsed;\n      }\n    }\n    for (role in cpuByRole) {\n      cpu = cpuByRole[role];\n      if (cpu > 1) {\n        console.log(\"Processed \" + (role.paddingLeft(\"                                                \")) + \" \\tin \" + (Math.trunc(cpu * 1000)) + \" cpu\");\n      }\n    }\n    endCpu = Game.cpu.getUsed();\n    console.log('-----');\n    console.log(\"Creeps took \" + (endCpu - cellCpu));\n    console.log(\"Total took \" + (endCpu - startCpu));\n    console.log(\" Spawn: \" + (cell.spawnEnergy()) + \"/\" + (cell.spawnEnergyCapacity()) + \"\\tTower: \" + primaryTower.energy + \"\\tCreep: \" + creepEnergy + \"\\tStore: \" + primaryStorage.store.energy + \"\\tCPU Bucket: \" + Game.cpu.bucket);\n    return console.log('FIN');\n  };\n}\n\nmain();\n\n//# sourceMappingURL=main.js.map\n","var Agent, MegaMiner,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nAgent = require('agent');\n\nMegaMiner = (function(superClass) {\n  extend(MegaMiner, superClass);\n\n  MegaMiner.bodyParts = function(room) {\n    var i, spawnSpace, workParts;\n    spawnSpace = room.spawnEnergyCapacity();\n    workParts = Math.min(Math.floor((spawnSpace - 200) / 100), 9);\n    return [MOVE, MOVE, CARRY, CARRY].concat((function() {\n      var j, ref, results;\n      results = [];\n      for (i = j = 1, ref = workParts; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n        results.push(WORK);\n      }\n      return results;\n    })());\n  };\n\n  function MegaMiner(creep, targetSource) {\n    if (targetSource == null) {\n      targetSource = nil;\n    }\n    MegaMiner.__super__.constructor.call(this, creep);\n    creep.memory.energyProvider = true;\n    if (targetSource != null) {\n      this.targetSource = creep.memory.targetSource = targetSource;\n    }\n  }\n\n  MegaMiner.prototype.loop = function() {\n    var ref;\n    if (this.creep.pos.isNearTo((ref = this.creep.pos.findClosestByRange(FIND_DROPPED_ENERGY)) != null ? ref.pos : void 0)) {\n      if (this.creep.pickup(this.creep.pos.findClosestByRange(FIND_DROPPED_ENERGY)) === 0) {\n        return;\n      }\n    }\n    switch (this.creep.harvest(this.targetSource)) {\n      case ERR_NOT_IN_RANGE:\n        this.creep.moveTo(this.targetSource);\n        break;\n      case ERR_NOT_ENOUGH_RESOURCES:\n        this.creep.pickup(this.creep.pos.findClosestByRange(FIND_DROPPED_ENERGY));\n    }\n    if (this.creep.carry.energy >= this.creep.energyCapacity) {\n      return this.creep.say(\"I'm Full!\");\n    }\n  };\n\n  MegaMiner.prototype.hasEnergy = function() {\n    return this.creep.carry.energy > 0;\n  };\n\n  return MegaMiner;\n\n})(Agent);\n\nmodule.exports = MegaMiner;\n\n//# sourceMappingURL=mega_miner.js.map\n","var Mine;\n\nMine = (function() {\n  function Mine(source) {\n    this.source = source;\n  }\n\n  Mine.prototype.capacity = function() {\n    var i, len, res, thing, things, wallCount, x, y, ys;\n    x = this.source.pos.x;\n    y = this.source.pos.y;\n    res = this.source.room.lookForAtArea('terrain', y - 1, x - 1, y + 1, x + 1);\n    wallCount = 0;\n    for (x in res) {\n      ys = res[x];\n      for (y in ys) {\n        things = ys[y];\n        for (i = 0, len = things.length; i < len; i++) {\n          thing = things[i];\n          if (thing === 'wall') {\n            wallCount += 1;\n            break;\n          }\n        }\n      }\n    }\n    return 9 - wallCount;\n  };\n\n  Mine.allInRoom = function(room) {\n    var sources;\n    sources = room.find(FIND_SOURCES);\n    return sources.map(function(s) {\n      return new Mine(s);\n    });\n  };\n\n  return Mine;\n\n})();\n\nmodule.exports = Mine;\n\n//# sourceMappingURL=mine.js.map\n","var PathUtils,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nPathUtils = (function() {\n  function PathUtils(creep) {\n    this.creep = creep;\n    this.nearestEnergyProvider = bind(this.nearestEnergyProvider, this);\n    this.nearestEnergyNeed = bind(this.nearestEnergyNeed, this);\n    this.distanceComparator = bind(this.distanceComparator, this);\n    this.pos = this.creep;\n    if (this.creep.pos != null) {\n      this.pos = this.creep.pos;\n    }\n    this.pos_S = this.pos.roomName + \"_\" + this.pos.x + \"_\" + this.pos.y;\n  }\n\n  PathUtils.prototype.sortByDistance = function(targets) {\n    var t;\n    t = targets.sort(this.distanceComparator);\n    return t;\n  };\n\n  PathUtils.prototype.distance = function(target) {\n    return this.pos.getRangeTo(target);\n  };\n\n  PathUtils.prototype.distanceComparator = function(a, b) {\n    var base, base1, name, name1;\n    if (a.distances == null) {\n      a.distances = {};\n    }\n    if ((base = a.distances)[name = this.pos_S] == null) {\n      base[name] = this.distance(a);\n    }\n    if (b.distances == null) {\n      b.distances = {};\n    }\n    if ((base1 = b.distances)[name1 = this.pos_S] == null) {\n      base1[name1] = this.distance(b);\n    }\n    return a.distances[this.pos_S] - b.distances[this.pos_S];\n  };\n\n  PathUtils.prototype.nearestEnergyNeed = function(room) {\n    var targets;\n    if (room == null) {\n      room = null;\n    }\n    room || (room = this.creep.room);\n    targets = room.find(FIND_MY_STRUCTURES).filter(function(c) {\n      return (c.structureType === 'extension' || c.structureType === 'spawn') && c.energy < c.energyCapacity;\n    });\n    this.sortByDistance(targets);\n    return targets[0];\n  };\n\n  PathUtils.prototype.nearestEnergyProvider = function(room) {\n    var targets;\n    if (room == null) {\n      room = null;\n    }\n    room || (room = this.creep.room);\n    targets = room.find(FIND_MY_CREEPS).filter(function(c) {\n      return c.memory.energyProvider && c.carry.energy > 20;\n    });\n    targets = targets.concat(room.find(FIND_MY_STRUCTURES).filter(function(c) {\n      return (c.structureType === 'extension' || c.structureType === 'spawn') && c.energy > 0;\n    }));\n    this.sortByDistance(targets);\n    return targets[0];\n  };\n\n  return PathUtils;\n\n})();\n\nmodule.exports = PathUtils;\n\n//# sourceMappingURL=path_utils.js.map\n","var Agent, PathUtils, PositionMiner,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nPathUtils = require('path_utils');\n\nAgent = require('agent');\n\nPositionMiner = (function(superClass) {\n  extend(PositionMiner, superClass);\n\n  function PositionMiner(creep, miningPos) {\n    this.miningPos = miningPos;\n    PositionMiner.__super__.constructor.call(this, creep);\n    creep.memory.energyProvider = true;\n  }\n\n  PositionMiner.prototype.loop = function() {\n    var err, source;\n    if (this.fullEnergy()) {\n      return;\n    }\n    if (!this.creep.memory.sourceId) {\n      if (this.miningPos.roomName === this.creep.pos.roomName) {\n        this.creep.memory.sourceId = new PathUtils(this.miningPos).sortByDistance(this.creep.room.find(FIND_SOURCES))[0].id;\n        this.log(\"Found source \" + this.creep.memory.sourceId);\n      } else {\n        this.log(\"Moving toward \" + this.miningPos);\n        this.creep.moveTo(this.miningPos, {\n          reusePath: 50\n        });\n        return;\n      }\n    }\n    if (this.creep.memory.sourceId) {\n      source = Game.getObjectById(this.creep.memory.sourceId);\n      if ((err = this.creep.harvest(source) === ERR_NOT_IN_RANGE)) {\n        this.creep.moveTo(source, {\n          reusePath: 10\n        });\n      }\n      if (err === -7) {\n        delete this.creep.memory.sourceId;\n        return this.log('Deleting sourceId!!');\n      }\n    }\n  };\n\n  return PositionMiner;\n\n})(Agent);\n\nmodule.exports = PositionMiner;\n\n//# sourceMappingURL=position_miner.js.map\n","var Deliverator, PathUtils, Upgrader,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nDeliverator = require('deliverator');\n\nPathUtils = require('path_utils');\n\nUpgrader = (function(superClass) {\n  extend(Upgrader, superClass);\n\n  function Upgrader(creep) {\n    Upgrader.__super__.constructor.call(this, creep, (function() {}), this.roomController);\n    creep.memory.state = 'deliver';\n    creep.memory.energyRequester = true;\n  }\n\n  Upgrader.prototype.roomController = function() {\n    return this.creep.room.controller;\n  };\n\n  Upgrader.prototype.loop = function() {\n    Upgrader.__super__.loop.call(this);\n    return this.creep.memory.state = 'deliver';\n  };\n\n  return Upgrader;\n\n})(Deliverator);\n\nmodule.exports = Upgrader;\n\n//# sourceMappingURL=upgrader.js.map\n"]}